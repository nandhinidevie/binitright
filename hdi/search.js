const wasteDatabase = {
      "banana peel": "Wet Waste",
      "orange skin": "Wet Waste",
      "apple skin": "Wet Waste",
      "watermelon": "Wet Waste",
      "veg peels": "Wet Waste",
      "fruit skins": "Wet Waste",
      "food leftovers": "Wet Waste",
      "spoiled food": "Wet Waste",
      "spoiled curry": "Wet Waste",
      "cooked rice": "Wet Waste",
      "sambar waste": "Wet Waste",
      "egg shells": "Wet Waste",
      "non-veg bones": "Wet Waste",
      "chicken bones": "Wet Waste",
      "fish bones": "Wet Waste",
      "spoiled fruits": "Wet Waste",
      "spoiled veggies": "Wet Waste",
      "oily tissue": "Wet Waste",
      "food tissue": "Wet Waste",
      "tissue paper": "Wet Waste",
      "tea dust": "Wet Waste",
      "coffee powder waste": "Wet Waste",
      "compostable paper cup": "Wet Waste",
      "compostable paper plate": "Wet Waste",
      "banana leaf": "Wet Waste",
      "areca plate": "Wet Waste",
      "dry leaves": "Wet Waste",
      "garden sticks": "Wet Waste",
      "puja flowers": "Wet Waste",
      "pooja flowers": "Wet Waste",
      "temple flowers": "Wet Waste",
      "flower garlands": "Wet Waste",
      "garden weeds": "Wet Waste",
      "grass cuttings": "Wet Waste",
      "tea bag": "Wet Waste",
      "tea bags": "Wet Waste",

      "paper cup": "Dry Waste",
      "paper plate": "Dry Waste",
      "plastic cover": "Dry Waste",
      "cardboard box": "Dry Waste",
      "cardboard boxes": "Dry Waste",
      "metal can": "Dry Waste",
      "metal cans": "Dry Waste",
      "sprite can": "Dry Waste",
      "sprite bottle": "Dry Waste",
      "plastic bag": "Dry Waste",
      "plastic bags": "Dry Waste",
      "7up can": "Dry Waste",
      "7up bottle": "Dry Waste",
      "biscuit wrapper": "Dry Waste",
      "water bottle": "Dry Waste",
      "bisleri bottle": "Dry Waste",
      "plastic bottle": "Dry Waste",
      "plastic dabba": "Dry Waste",
      "chips packet": "Dry Waste",
      "kurkure packet": "Dry Waste",
      "lays packet": "Dry Waste",
      "chocolate wrapper": "Dry Waste",
      "toffee wrapper": "Dry Waste",
      "disposable cup": "Dry Waste",
      "disposable plate": "Dry Waste",
      "disposable cutlery": "Dry Waste",
      "plastic cup": "Dry Waste",
      "nandini milk packet": "Dry Waste",
      "milk packet": "Dry Waste",
      "curd packet": "Dry Waste",
      "biryani box": "Dry Waste",
      "aluminium foil box": "Dry Waste",
      "aluminium foil": "Dry Waste",
      "aluminium can": "Dry Waste",
      "tin can": "Dry Waste",
      "beer can": "Dry Waste",
      "cold drink can": "Dry Waste",
      "coke can": "Dry Waste",
      "pepsi can": "Dry Waste",
      "fanta can": "Dry Waste",
      "glass bottle": "Dry Waste",
      "glass water bottle": "Dry Waste",
      "tetra pack": "Dry Waste",
      "newspaper": "Dry Waste",
      "magazine": "Dry Waste",
      "old books": "Dry Waste",
      "envelope": "Dry Waste",
      "amazon box": "Dry Waste",
      "carton box": "Dry Waste",
      "shoe box": "Dry Waste",
      "pizza box": "Dry Waste",
      "juice box": "Dry Waste",
      "frooti pack": "Dry Waste",
      "real juice pack": "Dry Waste",
      "buttermilk pack": "Dry Waste",
      "paperboat pack": "Dry Waste",
      "paper cup": "Dry Waste",
      "paper plate": "Dry Waste",
      "thermocol": "Dry Waste",
      "rubber band": "Dry Waste",
      "old sponge": "Dry Waste",
      "old mop": "Dry Waste",
      "wooden piece": "Dry Waste",
      "coconut shell": "Dry Waste",

      "biryani box": "Dry Waste",
      "silver biryani box": "Dry Waste",
      "foil biryani box": "Dry Waste",
      "biryani cover": "Dry Waste",
      "chicken 65 box": "Dry Waste",
      "takeaway box": "Dry Waste",
      "takeaway boxes": "Dry Waste",
      "takeaway container": "Dry Waste",
      "plastic food container": "Dry Waste",
      "disposable food box": "Dry Waste",
      "aluminium foil box": "Dry Waste",
      "butter chicken box": "Dry Waste",
      "pizza box": "Dry Waste",
      "burger wrapper": "Dry Waste",
      "sandwich wrapper": "Dry Waste",
      "sandwich box": "Dry Waste",
      "burger box": "Dry Waste",
      "paper straw": "Dry Waste",
      "plastic straw": "Dry Waste",
      "shawarma foil": "Dry Waste",
      "licious cover": "Dry Waste",
      "licious box": "Dry Waste",
      "paper": "Dry Waste",
      "kraftpaper": "Dry Waste",
      "chart paper": "Dry Waste",
      "a4 sheet": "Dry Waste",
      "salad bowl": "Dry Waste",
      "ceramic bowl": "Dry Waste",

      "swiggy box": "Dry Waste",
      "paper bag": "Dry Waste",
      "paper bags": "Dry Waste",
      "swiggy plastic container": "Dry Waste",
      "swiggy paper bag": "Dry Waste",
      "zomato box": "Dry Waste",
      "zomato plastic box": "Dry Waste",
      "zomato paper bag": "Dry Waste",
      "blinkit bag": "Dry Waste",
      "blinkit packet": "Dry Waste",
      "zepto bag": "Dry Waste",
      "zepto packet": "Dry Waste",
      "bigbasket bag": "Dry Waste",
      "bigbasket packet": "Dry Waste",
      "bbdaily packet": "Dry Waste",
      "instamart bag": "Dry Waste",
      "wooden spoon": "Dry Waste",
      "wooden fork": "Dry Waste",
      "wooden cutlery": "Dry Waste",
      "plastic spoon": "Dry Waste",
      "plastic cutlery": "Dry Waste",
      "plastic plate": "Dry Waste",

      "bingo packet": "Dry Waste",
      "hide and seek wrapper": "Dry Waste",
      "oreo wrapper": "Dry Waste",
      "parle g wrapper": "Dry Waste",
      "maggi packet": "Dry Waste",
      "noodles packet": "Dry Waste",
      "yippee noodles packet": "Dry Waste",
      "ready to eat packet": "Dry Waste",
      "ready to cook packet": "Dry Waste",
      "frozen peas packet": "Dry Waste",
      "ice cream cup": "Dry Waste",
      "ice cream wrapper": "Dry Waste",
      "amul ice cream box": "Dry Waste",

      "atta packet": "Dry Waste",
      "rice bag": "Dry Waste",
      "sugar bag": "Dry Waste",
      "dal packet": "Dry Waste",
      "oil packet": "Dry Waste",
      "sunflower oil packet": "Dry Waste",
      "fortune oil bottle": "Dry Waste",
      "aashirvaad atta packet": "Dry Waste",
      "plastic grocery cover": "Dry Waste",
      "vegetable plastic cover": "Dry Waste",
      "fruit plastic cover": "Dry Waste",

      "baby diaper": "Reject Waste",
      "used napkin": "Reject Waste",
      "fingernails": "Reject Waste",
      "nails": "Reject Waste",
      "cotton buds": "Reject Waste",
      "q tips": "Reject Waste",
      "q tip": "Reject Waste",
      "used cotton balls": "Reject Waste",
      "hair": "Reject Waste",
      "makeup": "Reject Waste",
      "lipstick": "Reject Waste",
      "compact powder": "Reject Waste",
      "nail polish bottle": "Reject Waste",
      "broken ceramic cup": "Reject Waste",
      "broken ceramic plate": "Reject Waste",
      "broken ceramic bowl": "Reject Waste",
      "diaper": "Reject Waste",
      "diapers": "Reject Waste",
      "sanitary pad": "Reject Waste",
      "sanitary waste": "Reject Waste",
      "diaper waste": "Reject Waste",
      "sanitary pads": "Reject Waste",
      "whisper pad": "Reject Waste",
      "nua pad": "Reject Waste",
      "stayfree pad": "Reject Waste",
      "whisper pads": "Reject Waste",
      "nua pads": "Reject Waste",
      "stayfree pads": "Reject Waste",

      "pad": "Reject Waste",
      "used mask": "Reject Waste",
      "mask": "Reject Waste",
      "bandage": "Reject Waste",
      "used gloves": "Reject Waste",
      "medical glove": "Reject Waste",
      "medical gloves": "Reject Waste",
      "condom": "Reject Waste",
      "condoms": "Reject Waste",
      "rusty nail": "Reject Waste",
      "iron nail": "Reject Waste",
      "used blade": "Reject Waste",
      "shaving razor": "Reject Waste",
      "gillette razor": "Reject Waste",
      "injection needle": "Reject Waste",
      "syringe": "Reject Waste",
      "injection bottle": "Reject Waste",
      "medicine strip": "Reject Waste",
      "tablet strip": "Reject Waste",
      "tablet": "Reject Waste",
      "capsule": "Reject Waste",
      "dust from broom": "Reject Waste",
      "dust": "Reject Waste",
      "stones": "Reject Waste",
      "construction waste": "Reject Waste",
      "brick": "Reject Waste",
      "broken brick": "Reject Waste",
      "cement dust": "Reject Waste",
      "cement powder": "Reject Waste",
      "paint tin": "Reject Waste",
      "paint waste": "Reject Waste",
      "drain mud": "Reject Waste",
      "broken pot": "Reject Waste",
      "broken flower pot": "Reject Waste",
      "broken glass": "Reject Waste",
      "glass pieces": "Reject Waste",

      "old phone": "E-Waste",
      "old electronics": "E-Waste",
      "old appliances": "E-Waste",
      "mobile phone": "E-Waste",
      "smartphone": "E-Waste",
      "landline phone": "E-Waste",
      "laptop": "E-Waste",
      "keyboard": "E-Waste",
      "mouse": "E-Waste",
      "monitor": "E-Waste",
      "cpu": "E-Waste",
      "printer": "E-Waste",
      "scanner": "E-Waste",
      "router": "E-Waste",
      "earphones": "E-Waste",
      "headphones": "E-Waste",
      "bluetooth speaker": "E-Waste",
      "charger": "E-Waste",
      "mobile charger": "E-Waste",
      "usb cable": "E-Waste",
      "data cable": "E-Waste",
      "power bank": "E-Waste",
      "smartwatch": "E-Waste",
      "aa battery": "E-Waste",
      "aaa battery": "E-Waste",
      "cell battery": "E-Waste",
      "mobile battery": "E-Waste",
      "laptop battery": "E-Waste",
      "mixer grinder": "E-Waste",
      "iron box": "E-Waste",
      "hair dryer": "E-Waste",
      "trimmer": "E-Waste",
      "shaver": "E-Waste",
      "fan": "E-Waste",
      "tv": "E-Waste",
      "washing machine": "E-Waste",
      "fridge": "E-Waste",
      "microwave oven": "E-Waste",
      "bulb": "E-Waste",
      "tube light": "E-Waste",
      "cfl bulb": "E-Waste",
      "led bulb": "E-Waste"
    };


    const itemTips = {
  // Tip: Rinse before bin
  "biryani box": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "foil biryani box": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "aluminium foil box": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "butter chicken box": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "shawarma foil": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "beer can": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "cold drink can": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "coke can": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "pepsi can": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "fanta can": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "metal can": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "metal cans": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "sprite can": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "7up can": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "ice cream cup": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "ice cream box": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "burger wrapper": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "sandwich wrapper": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "glass water bottle": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "licious cover": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "tetra pack": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "takeaway container": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "takeaway box": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "takeaway boxes": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "silver biryani box": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "buttermilk pack": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "swiggy plastic container": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "plastic food container": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "disposable food container": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "disposable cup": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "disposable plate": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "zomato plastic box": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "nandini milk packet": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "milk packet": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "curd packet": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "plastic dabba": "If it has food or liquid, rinse and dry before throwing it in the bin.",
  "plastic plate": "If it has food or liquid, rinse and dry before throwing it in the bin.",



  // Tip: Store separately
  "old phone": "Store separately and send to an e-waste recycler.",
  "fridge": "Store separately and send to an e-waste recycler.",
  "mobile phone": "Store separately and send to an e-waste recycler.",
  "bulb": "Store separately and send to an e-waste recycler.",
  "tube light": "Store separately and send to an e-waste recycler.",
  "cfl bulb": "Store separately and send to an e-waste recycler.",
  "led bulb": "Store separately and send to an e-waste recycler.",
  "tv": "Store separately and send to an e-waste recycler.",
  "aa battery": "Store separately and send to an e-waste recycler.",
  "aaa battery": "Store separately and send to an e-waste recycler.",
  "cell battery": "Store separately and send to an e-waste recycler.",
  "laptop battery": "Store separately and send to an e-waste recycler.",

  // Tip: Wrap hazardous
  "used blade": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
  "broken glass": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
  "glass pieces": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
  "syringe": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
  "injection needle": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
  "shaving razor": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
  "gillette razor": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
  "broken ceramic cup": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
  "broken ceramic plate": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
  "broken ceramic bowl": "If it is broken or sharp, wrap it in old newspaper or cloth before disposing.",
};



const input = document.getElementById('searchInput');
const searchBtn = document.getElementById('searchBtn');
const results = document.getElementById('results');
const tipArea = document.getElementById('tipArea');
const tagline = document.querySelector('.tagline');

function showResult(text, colorClass) {
  const el = document.createElement('div');
  el.className = `result ${colorClass}`;
  el.innerHTML = `<span>${text}</span>`;
  results.appendChild(el);
}

function clearResults() {
  results.innerHTML = '';
  tipArea.innerHTML = '';
  tipArea.style.display = 'none'; // hide tip when results are cleared
}

function checkBin() {
  clearResults();
  const q = input.value.trim().toLowerCase();

  if (!q) {
    showResult('Please enter an item to search.', 'orange');
    return;
  }

  const matches = Object.keys(wasteDatabase).filter(k => {
    const pattern = new RegExp(`\\b${q}\\b`, 'i'); // word boundary match
    return pattern.test(k);
  });

  if (matches.length === 0) {
    showResult('<span style="color: black;">‚ö†Ô∏è Item not found in database. Please dispose responsibly!</span>', 'orange');
    return;
  }

  let tipsToShow = []; // collect tips across all matches

  matches.forEach(k => { 
    const bin = wasteDatabase[k];
    let colorClass = '';
    let imgSrc = '';

    if (bin.includes('Wet')) {
        colorClass = 'green';
        imgSrc = 'https://i.postimg.cc/59qFW8TP/wet-bin.png';
    } else if (bin.includes('Dry')) {
        colorClass = 'blue';
        imgSrc = 'https://i.postimg.cc/xT6Jcn0M/dry-bin.png';
    } else if (bin.includes('E-Waste')) {
        colorClass = 'black';
        imgSrc = 'https://i.postimg.cc/7hVC1ySv/ewaste-bin.png';
    } else {
        colorClass = 'red';
        imgSrc = 'https://i.postimg.cc/RVSJSNzv/reject-bin.png';
    }

    // HTML with bin image
    const html = `${k} ‚Üí ${bin} <img src="${imgSrc}" style="width:20px;vertical-align:middle;">`;
    showResult(html, colorClass);

    // Tip check
    if (itemTips[k]) {
      const tip = itemTips[k];
      const isDryTip = tip.includes('If it has food or liquid');
      const isEwasteTip = tip.includes('Store separately');
      const isHazardTip = tip.includes('If it is broken or sharp');

      let tipClass = '';
      if (isDryTip && bin === 'Dry Waste') tipClass = 'tip-dry';
      if (isEwasteTip && bin === 'E-Waste') tipClass = 'tip-ewaste';
      if (isHazardTip && bin === 'Reject Waste') tipClass = 'tip-hazard';

      if (tipClass && !tipsToShow.some(t => t.text === tip)) {
        tipsToShow.push({ text: tip, cls: tipClass });
      }
    }
  });

  // After looping, show all tips together
  if (tipsToShow.length > 0) {
    tipArea.innerHTML = tipsToShow
      .map(t => `<div class="tip ${t.cls}">üí° ${t.text}</div>`)
      .join('');
    tipArea.style.display = 'block';
  }
}


input.addEventListener('keydown', function (e) {
  if (e.key === 'Enter') {
    tagline.style.display = 'none';
  }
});

searchBtn.addEventListener('click', checkBin);

input.addEventListener('keydown', e => { if (e.key === 'Enter') checkBin(); });



// Share button functionality
const shareBtn = document.getElementById("shareBtn");
const shareOptions = document.getElementById("shareOptions");
const copyLink = document.getElementById("copyLink");
const whatsappShare = document.getElementById("whatsappShare");

shareBtn.addEventListener("click", () => {
  shareOptions.style.display =
    shareOptions.style.display === "flex" ? "none" : "flex";
});

// Copy URL to clipboard
copyLink.addEventListener("click", () => {
  navigator.clipboard.writeText(window.location.href).then(() => {
    alert("‚úÖ Link copied to clipboard!");
    shareOptions.style.display = "none";
  });
});

// Share via WhatsApp
whatsappShare.addEventListener("click", () => {
  const url = encodeURIComponent(window.location.href);
  const whatsappUrl = `https://wa.me/?text=${url}`;
  window.open(whatsappUrl, "_blank");
  shareOptions.style.display = "none";
});



document.addEventListener("DOMContentLoaded", function () {
  // Change page title
  document.title = "Bin Finder";

  // Change favicon
  const faviconUrl = "/hdi/bin-finder/favicon.png"; // your custom favicon path
  let link = document.querySelector("link[rel~='icon']");
  if (!link) {
    link = document.createElement("link");
    link.rel = "icon";
    document.head.appendChild(link);
  }
  link.href = faviconUrl;
});

